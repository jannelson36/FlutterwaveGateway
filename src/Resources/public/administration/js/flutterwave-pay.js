!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/bundles/administration/",n(n.s="iaOb")}({GaFi:function(t){t.exports=JSON.parse('{"module":{"name":"Flutterwave Zahlung","title":"Flutterwave Zahlungsverkehr","description":"Flutterwave Zahlungsverkehr","navigation":{"label":"Zahlungsverkehr"}},"list":{"textTransactionOverview":"Zahlungsverkehr","buttonAddBlogEntry":"Zahlung hinzuf√ºgen","messageEmpty":"Keine Zahlungen vorhanden","flutterwaveDashboardLink":"Flutterwave Armaturenbrett","table":{"title":"Titel","active":"Aktiv","transaction":"Zahlungsverkehr"}},"order":{"transaction":{"paid":"Bezahlt","cancelled":"Abgebrochen"}},"transactions-list":{"flutterwave_transaction_id":"Flutterwave Transaktions-ID","payment_id":"Zahlungs-ID","amount":"Betrag","created_at":"Erstellt am","updated_at":"Aktualisiert am","order_number":"Bestellnummer","customer":"Kunde","status":"Status","links":"Links"}}')},K12c:function(t){t.exports=JSON.parse('{"module":{"name":"Flutterwave Payment","title":"Flutterwave transactions list","description":"PAY. transactions list","navigation":{"label":"Flutterwave transactions"}},"list":{"textTransactionOverview":"Blog entries","buttonAddBlogEntry":"Create new transaction entry","messageEmpty":"No transactions entries ...","flutterwaveDashboardLink":"Flutterwave Dashboard","table":{"title":"Title","active":"Active","transaction":"Transaction"}},"order":{"transaction":{"paid":"Paid (Capture)","cancelled":"Cancelled (Void)"}},"transactions-list":{"flutterwave_transaction_id":"Transaction ID","payment_id":"Payment ID","amount":"Amount","created_at":"Created at","updated_at":"Updated at","order_number":"Order number","customer":"Customer","status":"Transaction status","links":"Links"}}')},MM2G:function(t,e,n){},SZ7m:function(t,e,n){"use strict";function r(t,e){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],s=o[0],i={id:t+":"+a,css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(i):n.push(r[s]={id:s,parts:[i]})}return n}n.r(e),n.d(e,"default",(function(){return f}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=a&&(document.head||document.getElementsByTagName("head")[0]),i=null,l=0,c=!1,u=function(){},d=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,n,a){c=n,d=a||{};var s=r(t,e);return v(s),function(e){for(var n=[],a=0;a<s.length;a++){var i=s[a];(l=o[i.id]).refs--,n.push(l)}e?v(s=r(t,e)):s=[];for(a=0;a<n.length;a++){var l;if(0===(l=n[a]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete o[l.id]}}}}function v(t){for(var e=0;e<t.length;e++){var n=t[e],r=o[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(y(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(y(n.parts[a]));o[n.id]={id:n.id,refs:1,parts:s}}}}function h(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function y(t){var e,n,r=document.querySelector("style["+p+'~="'+t.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(m){var a=l++;r=i||(i=h()),e=w.bind(null,r,a,!1),n=w.bind(null,r,a,!0)}else r=h(),e=_.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var g,b=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function w(t,e,n,r){var a=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var o=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function _(t,e){var n=e.css,r=e.media,a=e.sourceMap;if(r&&t.setAttribute("media",r),d.ssrId&&t.setAttribute(p,e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},iaOb:function(t,e,n){"use strict";n.r(e);n("yHhp");var r=n("woi7"),a=n.n(r);n("r2iv");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){s=function(t,e){return new c(t,void 0,e)};var n=l(RegExp),r=RegExp.prototype,a=new WeakMap;function c(t,e,r){var o=n.call(this,t,e);return a.set(o,r||a.get(t)),o}function u(t,e){var n=a.get(e);return Object.keys(n).reduce((function(e,r){return e[r]=t[n[r]],e}),Object.create(null))}return i(c,n),c.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=u(e,this)),e},c.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=a.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+n[e]})))}if("function"==typeof e){var s=this;return r[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==o(t[t.length-1])&&t.push(u(t,s)),e.apply(this,t)}))}return r[Symbol.replace].call(this,t,e)},s.apply(this,arguments)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)})(t)}function c(t,e,n){return(c=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&d(a,n.prototype),a}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=Shopware.Component,f=Shopware.Data.Criteria;m.register("flutterwave-transactions-list",{template:a.a,inject:["acl","repositoryFactory","stateStyleDataProviderService","feature"],data:function(){return{repository:null,transactions:null,isLoading:!0,total:0,currentLanguageId:Shopware.Context.api.languageId,isUserCustomersViewer:this.isUserCustomersViewer(),isUserOrdersViewer:this.isUserOrdersViewer()}},metaInfo:function(){return{title:this.$createTitle()}},computed:{columns:function(){return[{property:"flutterwaveTransactionId",dataIndex:"flutterwaveTransactionId",label:this.$t("transactions-list.flutterwave_transaction_id"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"order.orderNumber",dataIndex:"orderNumber",label:this.$t("transactions-list.order_number"),sortIsAllowed:!1,allowResize:!0},{property:"amount",dataIndex:"amount",label:this.$t("transactions-list.amount"),allowResize:!0,sortIsAllowed:!0,primary:!0},{property:"customer.lastName",dataIndex:"customer",label:this.$t("transactions-list.customer"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"status",dataIndex:"status",label:this.$t("transactions-list.status"),allowResize:!0,sortIsAllowed:!1,primary:!0},{property:"links",dataIndex:"links",label:this.$t("transactions-list.links"),allowResize:!0,sortIsAllowed:!1,align:"center"},{property:"createdAt",dataIndex:"createdAt",label:this.$t("transactions-list.created_at"),sortIsAllowed:!0,allowResize:!0},{property:"updatedAt",dataIndex:"updatedAt",label:this.$t("transactions-list.updated_at"),sortIsAllowed:!0,allowResize:!0}]}},created:function(){var t=this;this.isLoading=!0,this.repository=this.repositoryFactory.create("flutterwave_payment");var e=new f;e.addAssociation("order"),e.addAssociation("customer"),e.addAssociation("stateMachineState"),e.addAssociation("order.transactions"),e.addSorting(f.sort("flutterwave_payment.createdAt","DESC")),this.repository.search(e,Shopware.Context.api).then((function(e){t.transactions=e,t.total=e.total,t.isLoading=!1}))},methods:{getVariantFromPaymentState:function(t){console.log(t);for(var e=t.transactions.last().stateMachineState.technicalName,n=0;n<t.transactions.length;n+=1)["cancelled","failed"].includes(t.transactions[n].stateMachineState.technicalName)||(e=t.transactions[n].stateMachineState.technicalName);var r=this.stateStyleDataProviderService.getStyle("order_transaction.state",e);return this.feature.isActive("FEATURE_NEXT_7530")?r.colorCode:r.variant},changeLanguage:function(t){this.currentLanguageId=t},getData:function(t){if(t<=0)return"";var e=s(/([0-9]{4}).([0-9]{2}).([0-9]{2}).([0-9]{2}).([0-9]{2})/gm,{year:1,month:2,day:3,hours:4,minutes:5}).exec(t).groups;return e.year+"-"+e.month+"-"+e.day+" "+e.hours+":"+e.minutes},isUserCustomersViewer:function(){return this.acl.can("customer.viewer")},isUserOrdersViewer:function(){return this.acl.can("order.viewer")}}});var v=n("GaFi"),h=n("w+Gp"),y=n("K12c");Shopware.Module.register("flutterwave-payment-module",{type:"plugin",name:"module.name",title:"module.title",description:"module.description",icon:"default-object-address",color:"#00bcd4",snippets:{"de-DE":v,"en-GB":h,"en-US":y},routes:{index:{components:{default:"flutterwave-transactions-list"},path:"index"}},navigation:[{path:"flutterwave.payment.module.index",label:"module.navigation.label",id:"flutterwave",parent:"sw-order",color:"#ff3d58",icon:"default-object-address",position:150}]})},r2iv:function(t,e,n){var r=n("MM2G");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n("SZ7m").default)("624a512b",r,!0,{})},"w+Gp":function(t){t.exports=JSON.parse('{"module":{"name":"Flutterwave Payment","title":"Flutterwave Payment Transactions","description":"PAY. transactions list","navigation":{"label":"Flutterwave transactions"}},"list":{"textTransactionOverview":"Flutterwave payment entries","buttonAddBlogEntry":"Create new transaction entry","messageEmpty":"No transactions entries ...","flutterwaveDashboardLink":"Flutterwave Dashboard","table":{"title":"Title","active":"Active","transaction":"Transaction"}},"order":{"transaction":{"paid":"Paid (Capture)","cancelled":"Cancelled (Void)"}},"transactions-list":{"flutterwave_transaction_id":"Transaction ID","payment_id":"Payment ID","amount":"Amount","created_at":"Created at","updated_at":"Updated at","order_number":"Order number","customer":"Customer","status":"Transaction status","links":"Links"}}')},woi7:function(t,e){t.exports='{% block transaction_list %}\n\t<sw-page class="flutterwave-transaction-list">\n\t\t<template slot="smart-bar-header">\n\t\t\t<h2>\n\t\t\t\t{% block transaction_list_smart_bar_header_title_text %}\n\t\t\t\t\t{{ $tc(\'list.textTransactionOverview\') }}\n\t\t\t\t{% endblock %}\n\t\t\t\t{% block transaction_list_smart_bar_header_amount %}\n\t\t\t\t\t<span v-if="!isLoading" class="sw-page__smart-bar-amount">\n\t\t\t\t\t\t({{ total }})\n\t\t\t\t\t</span>\n\t\t\t\t{% endblock %}\n\t\t\t</h2>\n\t\t</template>\n\t\t<template #language-switch>\n\t\t\t<sw-language-switch @on-change="changeLanguage"></sw-language-switch>\n\t\t</template>\n\n\t{% endblock %}\n\n\t<template #sidebar>\n\t\t<sas-blog-vertical-tabs/>\n\t</template>\n\n\n\t<template #content>\n\t\t{% block flutterwave_list_content %}\n\t\t\t<sw-entity-listing v-if="transactions" :items="transactions" :repository="repository" :showselection="false" :columns="columns" allowcolumnedit="false" sortisallowed="true">\n\n\t\t\t\t{% block flutterwave_list_grid_columns_links %}\n\t\t\t\t\t<template slot="column-links" slot-scope="{item}">\n\t\t\t\t\t\t<a target="_blank" class="sw-data-grid__cell-value" href="https://dashboard.flutterwave.com/">\n\t\t\t\t\t\t\t{{ $tc(\'list.flutterwaveDashboardLink\') }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t</template>\n\t\t\t\t\t<template slot="column-order.orderNumber" slot-scope="{item}">\n\t\t\t\t\t\t<router-link v-if="isUserOrdersViewer" class="sw-data-grid__cell-value" :to="{ name: \'sw.order.detail.base\', params: { id: item.orderId }}">\n\t\t\t\t\t\t\t{{ item.order.orderNumber }}\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\n\t\t\t\t\t</template>\n\t\t\t\t\t<template slot="column-customer.lastName" slot-scope="{item}">\n\t\t\t\t\t\t<router-link v-if="isUserCustomersViewer" class="sw-data-grid__cell-value" :to="{ name: \'sw.customer.detail.base\', params: { id: item.customerId } }">\n\t\t\t\t\t\t\t{{ item.customer.lastName }}\n\t\t\t\t\t\t\t{{ item.customer.firstName }}\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-status" slot-scope="{ item }">\n\t\t\t\t\t\t<sw-label :variant="getVariantFromPaymentState(item.order)" appearance="pill">\n\t\t\t\t\t\t\t{{ item.order.transactions.last().stateMachineState.translated.name }}\n\t\t\t\t\t\t</sw-label>\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-updatedAt" slot-scope="{ item }">\n\t\t\t\t\t\t{{ item.updatedAt|date("m/d/Y") }}\n\t\t\t\t\t</template>\n\n\t\t\t\t\t<template slot="column-createdAt" slot-scope="{ item }">\n\t\t\t\t\t\t{# <sw-time-ago :date="{{ item.createdAt }}" /> #}\n\t\t\t\t\t\t{{ item.createdAt|date("m/d/Y") }}\n\t\t\t\t\t</template>\n\t\t\t\t{% endblock %}\n\n\t\t\t\t{% block flutterwave_list_grid_columns_transactions %}{% endblock %}\n\n\t\t\t</sw-entity-listing>\n\t\t{% endblock %}\n\n\t\t{% block sas_blog_list_empty_state %}\n\t\t\t<sw-empty-state v-if="!isLoading && !total" :title="$tc(\'list.messageEmpty\')">\n\t\t\t\t{{ $tc(\'list.messageEmpty\') }}\n\t\t\t</sw-empty-state>\n\t\t{% endblock %}\n\t</template>\n\n\n</sw-page>\n'},yHhp:function(t,e){Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"flutterwave",key:"flutterwave_transactions",roles:{viewer:{privileges:["order:read","customer:read","state_machine_state:read","flutterwave_transactions:read"],dependencies:[]}}}),Shopware.Service("privileges").addPrivilegeMappingEntry({category:"permissions",parent:"orders",key:"order",roles:{viewer:{privileges:["flutterwave_transactions:read"],dependencies:[]}}})}});